(()=>{"use strict";var e,s={909:(e,s,t)=>{const a=window.wp.element,r=window.wp.i18n,l=window.wp.apiFetch;var i=t.n(l);const n=window.ReactJSXRuntime,o=({post:e,onUpdate:s})=>{const[t,l]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"rsfv-video-type-select",children:[(0,n.jsxs)("select",{value:e.video_source||"",onChange:t=>(async t=>{l(!0);try{await i()({path:"/rsfv/v1/posts/update-source",method:"POST",data:{post_id:e.id,video_source:t}}),s&&s(e.id,{video_source:t,has_video:(a=t,!("self"!==a||!e.video_id)||!("embed"!==a||!e.embed_url))})}catch(e){console.error("Error updating video source:",e)}finally{l(!1)}var a})(t.target.value),disabled:t,className:"rsfv-video-source-select",children:[(0,n.jsx)("option",{value:"",children:(0,r.__)("Select Type","rsfv")}),(0,n.jsx)("option",{value:"self",children:(0,r.__)("Self Hosted","rsfv")}),(0,n.jsx)("option",{value:"embed",children:(0,r.__)("Embed","rsfv")})]}),t&&(0,n.jsx)("span",{className:"spinner is-active rsfv-inline-spinner"})]})},d=({post:e,onUpdate:s})=>{const[t,l]=(0,a.useState)(e.embed_url||""),[o,d]=(0,a.useState)(!1),[c,v]=(0,a.useState)(!1),f=e.video_source||"";if(!f)return(0,n.jsx)("span",{className:"rsfv-no-action",children:"â€”"});const u=()=>{const t=wp.media({title:(0,r.__)("Select or Upload Video","rsfv"),button:{text:(0,r.__)("Use this video","rsfv")},library:{type:"video"},multiple:!1});t.on("select",(async()=>{const a=t.state().get("selection").first().toJSON();d(!0);try{await i()({path:"/rsfv/v1/posts/update-video",method:"POST",data:{post_id:e.id,video_source:"self",video_id:a.id}}),s&&s(e.id,{video_source:"self",video_id:a.id,video_url:a.url,has_video:!0})}catch(e){console.error("Error saving video:",e)}finally{d(!1)}})),t.open()},h=()=>{const t=wp.media({title:(0,r.__)("Select Poster Image","rsfv"),button:{text:(0,r.__)("Use this image","rsfv")},library:{type:"image"},multiple:!1});t.on("select",(async()=>{const a=t.state().get("selection").first().toJSON();v(!0);try{await i()({path:"/rsfv/v1/posts/update-poster",method:"POST",data:{post_id:e.id,poster_id:a.id}}),s&&s(e.id,{poster_id:a.id,poster_url:a.url})}catch(e){console.error("Error saving poster:",e)}finally{v(!1)}})),t.open()},p=e=>{if(!e)return!1;try{const s=new URL(e);return["http:","https:"].includes(s.protocol)}catch(e){return!1}},m=async()=>{if(!t||p(t)){d(!0);try{await i()({path:"/rsfv/v1/posts/update-video",method:"POST",data:{post_id:e.id,video_source:"embed",embed_url:t}}),s&&s(e.id,{video_source:"embed",embed_url:t,has_video:!!t})}catch(e){console.error("Error saving embed URL:",e),alert(e.message||(0,r.__)("Error saving embed URL.","rsfv"))}finally{d(!1)}}else alert((0,r.__)("Please enter a valid URL.","rsfv"))},_=async()=>{if(confirm((0,r.__)("Are you sure you want to remove the video?","rsfv"))){d(!0);try{await i()({path:"/rsfv/v1/posts/update-video",method:"POST",data:{post_id:e.id,video_source:"self",video_id:0}}),s&&s(e.id,{video_id:0,video_url:"",has_video:!1})}catch(e){console.error("Error removing video:",e)}finally{d(!1)}}},x=async()=>{if(confirm((0,r.__)("Are you sure you want to remove the poster?","rsfv"))){v(!0);try{await i()({path:"/rsfv/v1/posts/update-poster",method:"POST",data:{post_id:e.id,poster_id:0}}),s&&s(e.id,{poster_id:0,poster_url:""})}catch(e){console.error("Error removing poster:",e)}finally{v(!1)}}};if("self"===f){const s=!!e.video_id,t=!!e.poster_id,a=s?(0,r.__)("Edit Video","rsfv"):(0,r.__)("Upload Video","rsfv"),l=s?"button button-small":"button button-small button-primary",i=t?(0,r.__)("Edit Poster","rsfv"):(0,r.__)("Set Poster","rsfv");return(0,n.jsxs)("div",{className:"rsfv-video-action rsfv-self-action",children:[(0,n.jsxs)("div",{className:"rsfv-action-row",children:[(0,n.jsx)("button",{className:l,onClick:u,disabled:o||c,children:o?(0,r.__)("Saving...","rsfv"):a}),s&&(0,n.jsx)("button",{className:"button button-small button-link-delete button-warning",onClick:_,disabled:o||c,children:(0,r.__)("Remove","rsfv")})]}),s&&(0,n.jsxs)("div",{className:"rsfv-action-row",children:[(0,n.jsx)("button",{className:"button button-small",onClick:h,disabled:o||c,children:c?(0,r.__)("Saving...","rsfv"):i}),t&&(0,n.jsx)("button",{className:"button button-small button-link-delete",onClick:x,disabled:o||c,children:(0,r.__)("Remove","rsfv")})]})]})}if("embed"===f){const s=!t||p(t),a=t!==(e.embed_url||"");return(0,n.jsxs)("div",{className:"rsfv-video-action rsfv-embed-action",children:[(0,n.jsx)("input",{type:"url",className:"rsfv-embed-input"+(s?"":" rsfv-invalid-url"),value:t,onChange:e=>l(e.target.value),placeholder:(0,r.__)("Enter video URL...","rsfv"),disabled:o}),(0,n.jsx)("button",{className:"button button-small button-primary",onClick:m,disabled:o||!a||t&&!s,children:o?(0,r.__)("Saving...","rsfv"):(0,r.__)("Save","rsfv")})]})}return null},c=({post:e})=>{const s=e.video_source||"";if(!s)return(0,n.jsx)("span",{className:"rsfv-no-video",children:"â€”"});if("self"===s&&e.video_id){const s=e.video_url||"",t=e.poster_url||"";return s?(0,n.jsx)("div",{className:"rsfv-video-preview",children:(0,n.jsx)("video",{src:s,poster:t||void 0,controls:!0,muted:!0,preload:"metadata"})}):(0,n.jsx)("span",{className:"rsfv-no-video",children:"â€”"})}return"embed"===s&&e.embed_url?(0,n.jsx)("div",{className:"rsfv-video-preview rsfv-embed-preview",children:(0,n.jsxs)("a",{href:e.embed_url,target:"_blank",rel:"noopener noreferrer",className:"rsfv-embed-link",children:[(0,n.jsx)("span",{className:"dashicons dashicons-video-alt3"}),(0,r.__)("View Video","rsfv")]})}):(0,n.jsx)("span",{className:"rsfv-no-video",children:"â€”"})},v=({post:e,onUpdate:s})=>{const[t,l]=(0,a.useState)(!1),o=!!e.thumbnail,d=()=>{const t=wp.media({title:(0,r.__)("Select Featured Image","rsfv"),button:{text:(0,r.__)("Set featured image","rsfv")},library:{type:"image"},multiple:!1});t.on("select",(async()=>{const a=t.state().get("selection").first().toJSON();l(!0);try{await i()({path:"/rsfv/v1/posts/update-thumbnail",method:"POST",data:{post_id:e.id,thumbnail_id:a.id}}),s&&s(e.id,{thumbnail:a.sizes?.thumbnail?.url||a.url})}catch(e){console.error("Error setting thumbnail:",e)}finally{l(!1)}})),t.open()};return t?(0,n.jsx)("div",{className:"rsfv-thumbnail-cell rsfv-thumbnail-saving",children:(0,n.jsx)("span",{className:"spinner is-active"})}):o?(0,n.jsxs)("div",{className:"rsfv-thumbnail-cell rsfv-has-thumbnail",onClick:d,children:[(0,n.jsx)("img",{src:e.thumbnail,alt:e.title,className:"rsfv-thumbnail"}),(0,n.jsx)("div",{className:"rsfv-thumbnail-overlay rsfv-thumbnail-remove",children:(0,n.jsx)("button",{className:"rsfv-thumbnail-action",onClick:async t=>{t.stopPropagation(),l(!0);try{await i()({path:"/rsfv/v1/posts/update-thumbnail",method:"POST",data:{post_id:e.id,thumbnail_id:0}}),s&&s(e.id,{thumbnail:""})}catch(e){console.error("Error removing thumbnail:",e)}finally{l(!1)}},title:(0,r.__)("Remove featured image","rsfv"),children:(0,n.jsx)("span",{className:"dashicons dashicons-trash"})})})]}):(0,n.jsxs)("div",{className:"rsfv-thumbnail-cell rsfv-no-thumbnail",onClick:d,children:[(0,n.jsx)("span",{className:"dashicons dashicons-format-image"}),(0,n.jsx)("div",{className:"rsfv-thumbnail-overlay rsfv-thumbnail-add",children:(0,n.jsx)("button",{className:"rsfv-thumbnail-action",title:(0,r.__)("Set featured image","rsfv"),children:(0,n.jsx)("span",{className:"dashicons dashicons-plus-alt2"})})})]})},f={filters:{},actions:{}},u=(e,s,...t)=>f.filters[e]?f.filters[e].reduce(((e,{callback:s})=>s(e,...t)),s):s,h=(e,...s)=>{f.actions[e]&&f.actions[e].forEach((({callback:e})=>e(...s)))};window.rsfvToolsHooks={addFilter:(e,s,t=10)=>{f.filters[e]||(f.filters[e]=[]),f.filters[e].push({callback:s,priority:t}),f.filters[e].sort(((e,s)=>e.priority-s.priority))},applyFilters:u,addAction:(e,s,t=10)=>{f.actions[e]||(f.actions[e]=[]),f.actions[e].push({callback:s,priority:t}),f.actions[e].sort(((e,s)=>e.priority-s.priority))},doAction:h,removeFilter:(e,s)=>{f.filters[e]&&(f.filters[e]=f.filters[e].filter((e=>e.callback!==s)))},removeAction:(e,s)=>{f.actions[e]&&(f.actions[e]=f.actions[e].filter((e=>e.callback!==s)))}};const p=({posts:e,onRefresh:s})=>{const[t,l]=(0,a.useState)(e),i=(0,a.useMemo)((()=>{const e=window.rsfvTools?.columns||{};return u("rsfv_tools_columns",e)}),[]);if(e!==t&&e.length!==t.length&&l(e),!t||0===t.length)return(0,n.jsx)("div",{className:"rsfv-no-posts",children:(0,n.jsx)("p",{children:(0,r.__)("No posts found for this post type.","rsfv")})});const f=e=>e.has_video?(0,n.jsx)("span",{className:"rsfv-badge rsfv-badge-success",children:(0,r.__)("Has Video","rsfv")}):(0,n.jsx)("span",{className:"rsfv-badge rsfv-badge-default",children:(0,r.__)("No Video","rsfv")}),p=(e,s)=>{l((t=>t.map((t=>t.id===e?{...t,...s}:t)))),h("rsfv_tools_post_updated",e,s)},m=(e,s)=>{const t=u("rsfv_tools_cell_content",null,e,s,p);if(null!==t)return t;switch(e){case"thumbnail":return(0,n.jsx)(v,{post:s,onUpdate:p});case"title":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)("a",{href:s.edit_link,target:"_blank",rel:"noopener noreferrer",children:s.title||(0,r.__)("(No title)","rsfv")})}),(0,n.jsxs)("div",{className:"row-actions",children:[(0,n.jsx)("span",{className:"edit",children:(0,n.jsx)("a",{href:s.edit_link,target:"_blank",rel:"noopener noreferrer",children:(0,r.__)("Edit","rsfv")})})," | ",(0,n.jsx)("span",{className:"view",children:(0,n.jsx)("a",{href:s.permalink,target:"_blank",rel:"noopener noreferrer",children:(0,r.__)("View","rsfv")})})]})]});case"status_type":return(0,n.jsxs)("div",{className:"rsfv-status-type",children:[f(s),(0,n.jsx)(o,{post:s,onUpdate:p})]});case"video_action":return(0,n.jsx)(d,{post:s,onUpdate:p});case"video_preview":return(0,n.jsx)(c,{post:s});default:return s[e]||""}};return(0,n.jsxs)("table",{className:"rsfv-posts-table wp-list-table widefat fixed striped",children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:Object.entries(i).map((([e,s])=>(0,n.jsx)("th",{className:s.class||"",children:s.label},e)))})}),(0,n.jsx)("tbody",{children:t.map((e=>(0,n.jsx)("tr",{children:Object.entries(i).map((([s,t])=>(0,n.jsx)("td",{className:t.class||"",children:m(s,e)},s)))},e.id)))})]})},m=({currentPage:e,totalPages:s,totalItems:t,onPageChange:a})=>(0,n.jsx)("div",{className:"rsfv-pagination tablenav bottom",children:(0,n.jsxs)("div",{className:"tablenav-pages",children:[(0,n.jsxs)("span",{className:"displaying-num",children:[t," ",(0,r.__)("items","rsfv")]}),(0,n.jsxs)("span",{className:"pagination-links",children:[(0,n.jsx)("button",{className:"first-page button",onClick:()=>{a(1)},disabled:1===e,"aria-label":(0,r.__)("First page","rsfv"),children:"Â«"}),(0,n.jsx)("button",{className:"prev-page button",onClick:()=>{e>1&&a(e-1)},disabled:1===e,"aria-label":(0,r.__)("Previous page","rsfv"),children:"â€¹"}),(0,n.jsx)("span",{className:"paging-input",children:(0,n.jsxs)("span",{className:"tablenav-paging-text",children:[e," ",(0,r.__)("of","rsfv")," ",(0,n.jsx)("span",{className:"total-pages",children:s})]})}),(0,n.jsx)("button",{className:"next-page button",onClick:()=>{e<s&&a(e+1)},disabled:e===s,"aria-label":(0,r.__)("Next page","rsfv"),children:"â€º"}),(0,n.jsx)("button",{className:"last-page button",onClick:()=>{a(s)},disabled:e===s,"aria-label":(0,r.__)("Last page","rsfv"),children:"Â»"})]})]})}),_=({postTypes:e,selectedPostType:s,onChange:t})=>e&&0!==e.length?(0,n.jsxs)("div",{className:"rsfv-post-type-filter",children:[(0,n.jsx)("label",{htmlFor:"rsfv-post-type-select",children:(0,r.__)("Post Type:","rsfv")}),(0,n.jsx)("select",{id:"rsfv-post-type-select",value:s,onChange:e=>t(e.target.value),children:e.map((e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value)))})]}):null,x="rsfv_tools_post_type",b="rsfv_tools_per_page",g=(e,s)=>{try{const t=localStorage.getItem(e);return null!==t?t:s}catch{return s}},j=(e,s)=>{try{localStorage.setItem(e,s)}catch{}},y=()=>{const e=window.rsfvTools?.postTypes||[],s=()=>{const s=g(x,"");return s&&e.some((e=>e.value===s))?s:e.length>0?e[0].value:""},[t,l]=(0,a.useState)(s),[o,d]=(0,a.useState)([]),[c,v]=(0,a.useState)(!1),[f,u]=(0,a.useState)(1),[h,y]=(0,a.useState)(1),[N,w]=(0,a.useState)(0),[S,k]=(0,a.useState)((()=>{const e=g(b,""),s=parseInt(e,10);return[10,20,50,100].includes(s)?s:window.rsfvTools?.perPage||20})),[C,T]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),[F,U]=(0,a.useState)(null),O=(0,a.useMemo)((()=>{const s=e.find((e=>e.value===t));return s?s.label:(0,r.__)("posts","rsfv")}),[e,t]);(0,a.useEffect)((()=>{if(e.length>0&&!t){const e=s();l(e)}}),[e,t]);const V=(0,a.useCallback)((async()=>{if(t){v(!0);try{let e=`/rsfv/v1/posts?post_type=${t}&page=${f}&per_page=${S}`;C&&(e+=`&search=${encodeURIComponent(C)}`);const s=await i()({path:e,parse:!1}),a=await s.json(),r=parseInt(s.headers.get("X-WP-Total"),10),l=parseInt(s.headers.get("X-WP-TotalPages"),10);d(a),w(r),y(l)}catch(e){console.error("Error fetching posts:",e),d([])}finally{v(!1)}}}),[t,f,S,C]);return(0,a.useEffect)((()=>{V()}),[V]),(0,n.jsxs)("div",{className:"rsfv-manage-videos",children:[(0,n.jsxs)("div",{className:"rsfv-toolbar",children:[(0,n.jsx)(_,{postTypes:e,selectedPostType:t,onChange:e=>{l(e),j(x,e),u(1),T(""),E("")}}),(0,n.jsxs)("div",{className:"rsfv-per-page",children:[(0,n.jsx)("label",{htmlFor:"rsfv-per-page",children:(0,r.__)("Per page:","rsfv")}),(0,n.jsxs)("select",{id:"rsfv-per-page",value:S,onChange:e=>{return s=parseInt(e.target.value,10),k(s),j(b,s.toString()),void u(1);var s},children:[(0,n.jsx)("option",{value:"10",children:"10"}),(0,n.jsx)("option",{value:"20",children:"20"}),(0,n.jsx)("option",{value:"50",children:"50"}),(0,n.jsx)("option",{value:"100",children:"100"})]})]}),(0,n.jsxs)("form",{className:"rsfv-search",onSubmit:e=>{e.preventDefault(),F&&clearTimeout(F),T(P),u(1)},children:[c&&C&&(0,n.jsx)("span",{className:"rsfv-search-spinner spinner is-active"}),(0,n.jsx)("input",{type:"search",className:"rsfv-search-input",placeholder:(0,r.sprintf)(/* translators: %s: post type name */ /* translators: %s: post type name */
(0,r.__)("Search %s...","rsfv"),O),value:P,onChange:e=>(e=>{if(E(e),F&&clearTimeout(F),""===e)T(""),u(1);else if(e.length>=3){const s=setTimeout((()=>{T(e),u(1)}),300);U(s)}})(e.target.value)})]})]}),c?(0,n.jsxs)("div",{className:"rsfv-loading",children:[(0,n.jsx)("span",{className:"spinner is-active"}),(0,n.jsx)("span",{children:(0,r.__)("Loading posts...","rsfv")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{posts:o,onRefresh:V}),h>1&&(0,n.jsx)(m,{currentPage:f,totalPages:h,totalItems:N,onPageChange:e=>{u(e)}})]})]})},N=({video:e,onSave:s,onCancel:t,saving:l})=>{const o=!!e,[d,c]=(0,a.useState)(e?.title||""),[v,f]=(0,a.useState)(e?.video_source||"self"),[u,h]=(0,a.useState)(e?.video_id||0),[p,m]=(0,a.useState)(e?.video_url||""),[_,x]=(0,a.useState)(e?.embed_url||""),[b,g]=(0,a.useState)(e?.display_type||"sitewide"),[j,y]=(0,a.useState)(e?.page_ids||[]),[N,w]=(0,a.useState)(e?.target_post_types||[]),[S,k]=(0,a.useState)(e?.target_taxonomies||[]),[C,T]=(0,a.useState)(e?.status||"publish"),[P,E]=(0,a.useState)(""),[F,U]=(0,a.useState)([]),[O,V]=(0,a.useState)(!1),[$,R]=(0,a.useState)(""),[A,I]=(0,a.useState)([]),[L,D]=(0,a.useState)(!1),[H,J]=(0,a.useState)((()=>{if(!e?.target_taxonomies)return[];const s=[],t=window.rsfvTools?.taxonomies||[];return e.target_taxonomies.forEach((e=>{const a=t.find((s=>s.name===e.taxonomy));(e.terms||[]).forEach((t=>{const r=a?.terms?.find((e=>e.value===t)),l=a?a.label:e.taxonomy;s.push({value:t,taxonomy:e.taxonomy,label:r?`${r.label} (${l})`:`#${t} (${l})`})}))})),s})),W=window.rsfvTools?.postTypesAll||[],q=(window.rsfvTools,window.rsfvTools?.pages||[]),M=()=>{const e=wp.media({title:(0,r.__)("Select Video","rsfv"),button:{text:(0,r.__)("Use this video","rsfv")},library:{type:"video"},multiple:!1});e.on("select",(()=>{const s=e.state().get("selection").first().toJSON();h(s.id),m(s.url)})),e.open()},G=(0,a.useCallback)((async e=>{if(!e||e.length<2)U([]);else{V(!0);try{const s=await i()({path:`/rsfv/v1/floating-videos/search-pages?search=${encodeURIComponent(e)}`});U(s)}catch{U([])}finally{V(!1)}}}),[]);(0,a.useEffect)((()=>{const e=setTimeout((()=>G(P)),300);return()=>clearTimeout(e)}),[P,G]);const X=(0,a.useCallback)((async e=>{if(!e||e.length<2)I([]);else{D(!0);try{const s=await i()({path:`/rsfv/v1/floating-videos/search-terms?search=${encodeURIComponent(e)}`});I(s)}catch{I([])}finally{D(!1)}}}),[]);(0,a.useEffect)((()=>{const e=setTimeout((()=>X($)),300);return()=>clearTimeout(e)}),[$,X]);const B=(e,s)=>H.some((t=>t.value===e&&t.taxonomy===s)),Y=e=>{const s=q.find((s=>s.value===e));return s?s.label:`#${e}`};return(0,n.jsxs)("div",{className:"rsfv-fv-form-wrap",children:[(0,n.jsxs)("div",{className:"rsfv-fv-form-header",children:[(0,n.jsx)("h2",{children:o?(0,r.__)("Edit Floating Video","rsfv"):(0,r.__)("Add New Floating Video","rsfv")}),(0,n.jsx)("button",{className:"button",onClick:t,children:(0,r.__)("â† Back to List","rsfv")})]}),(0,n.jsxs)("form",{className:"rsfv-fv-form",onSubmit:e=>{e.preventDefault(),s({title:d,status:C,video_source:v,video_id:"self"===v?u:0,embed_url:"embed"===v?_:"",display_type:b,page_ids:"specific_pages"===b?j:[],target_post_types:"post_types"===b?N:[],target_taxonomies:"taxonomies"===b?S:[]})},children:[(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{htmlFor:"rsfv-fv-title",children:(0,r.__)("Title","rsfv")}),(0,n.jsx)("input",{id:"rsfv-fv-title",type:"text",className:"regular-text",value:d,onChange:e=>c(e.target.value),placeholder:(0,r.__)("Enter a name for this floating video","rsfv"),required:!0})]}),(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{htmlFor:"rsfv-fv-status",children:(0,r.__)("Status","rsfv")}),(0,n.jsxs)("select",{id:"rsfv-fv-status",value:C,onChange:e=>T(e.target.value),children:[(0,n.jsx)("option",{value:"publish",children:(0,r.__)("Active","rsfv")}),(0,n.jsx)("option",{value:"draft",children:(0,r.__)("Draft","rsfv")})]})]}),(0,n.jsxs)("fieldset",{className:"rsfv-fv-fieldset",children:[(0,n.jsx)("legend",{children:(0,r.__)("Video","rsfv")}),(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{htmlFor:"rsfv-fv-source",children:(0,r.__)("Video Source","rsfv")}),(0,n.jsxs)("select",{id:"rsfv-fv-source",value:v,onChange:e=>f(e.target.value),children:[(0,n.jsx)("option",{value:"self",children:(0,r.__)("Self-hosted (Upload)","rsfv")}),(0,n.jsx)("option",{value:"embed",children:(0,r.__)("Embed (URL)","rsfv")})]})]}),"self"===v&&(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{children:(0,r.__)("Video File","rsfv")}),u&&p?(0,n.jsxs)("div",{className:"rsfv-fv-video-preview",children:[(0,n.jsx)("video",{src:p,style:{maxWidth:"320px",maxHeight:"180px"},controls:!0}),(0,n.jsxs)("div",{className:"rsfv-fv-video-actions",children:[(0,n.jsx)("button",{type:"button",className:"button",onClick:M,children:(0,r.__)("Change Video","rsfv")}),(0,n.jsx)("button",{type:"button",className:"button button-link-delete",onClick:()=>{h(0),m("")},children:(0,r.__)("Remove","rsfv")})]})]}):(0,n.jsx)("button",{type:"button",className:"button",onClick:M,children:(0,r.__)("Select Video","rsfv")})]}),"embed"===v&&(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{htmlFor:"rsfv-fv-embed-url",children:(0,r.__)("Embed URL","rsfv")}),(0,n.jsx)("input",{id:"rsfv-fv-embed-url",type:"url",className:"regular-text",value:_,onChange:e=>x(e.target.value),placeholder:"https://www.youtube.com/watch?v=..."}),(0,n.jsx)("p",{className:"description",children:(0,r.__)("Paste a YouTube, Vimeo, or other supported video URL.","rsfv")})]})]}),(0,n.jsxs)("fieldset",{className:"rsfv-fv-fieldset",children:[(0,n.jsx)("legend",{children:(0,r.__)("Display Conditions","rsfv")}),(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{htmlFor:"rsfv-fv-display-type",children:(0,r.__)("Show On","rsfv")}),(0,n.jsxs)("select",{id:"rsfv-fv-display-type",value:b,onChange:e=>g(e.target.value),children:[(0,n.jsx)("option",{value:"sitewide",children:(0,r.__)("Sitewide (All Pages)","rsfv")}),(0,n.jsx)("option",{value:"specific_pages",children:(0,r.__)("Specific Posts & Pages (All CPTs)","rsfv")}),(0,n.jsx)("option",{value:"post_types",children:(0,r.__)("Post Type (Singles & Archives)","rsfv")}),(0,n.jsx)("option",{value:"taxonomies",children:(0,r.__)("Taxonomy Terms","rsfv")})]})]}),"specific_pages"===b&&(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{children:(0,r.__)("Select Posts & Pages","rsfv")}),j.length>0&&(0,n.jsx)("div",{className:"rsfv-fv-tags",children:j.map((e=>(0,n.jsxs)("span",{className:"rsfv-fv-tag",children:[Y(e),(0,n.jsx)("button",{type:"button",className:"rsfv-fv-tag-remove",onClick:()=>(e=>{y(j.filter((s=>s!==e)))})(e),children:"Ã—"})]},e)))}),(0,n.jsxs)("div",{className:"rsfv-fv-page-search",children:[(0,n.jsx)("input",{type:"text",className:"regular-text",value:P,onChange:e=>E(e.target.value),placeholder:(0,r.__)("Search posts, pages & custom post types...","rsfv")}),O&&(0,n.jsx)("span",{className:"spinner is-active"}),F.length>0&&(0,n.jsx)("ul",{className:"rsfv-fv-search-results",children:F.map((e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{type:"button",onClick:()=>{return s=e.value,e.label,j.includes(s)||y([...j,s]),E(""),void U([]);var s},disabled:j.includes(e.value),children:[e.label,j.includes(e.value)&&" âœ“"]})},e.value)))})]})]}),"post_types"===b&&(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{children:(0,r.__)("Select Post Types","rsfv")}),(0,n.jsx)("div",{className:"rsfv-fv-checkbox-group",children:W.map((e=>(0,n.jsxs)("label",{className:"rsfv-fv-checkbox-label",children:[(0,n.jsx)("input",{type:"checkbox",checked:N.includes(e.value),onChange:()=>(e=>{w((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))})(e.value)}),e.label]},e.value)))}),(0,n.jsx)("p",{className:"description",children:(0,r.__)("The floating video will appear on single and archive pages of selected post types.","rsfv")})]}),"taxonomies"===b&&(0,n.jsxs)("div",{className:"rsfv-fv-field",children:[(0,n.jsx)("label",{children:(0,r.__)("Select Taxonomy Terms","rsfv")}),H.length>0&&(0,n.jsx)("div",{className:"rsfv-fv-tags",children:H.map((e=>(0,n.jsxs)("span",{className:"rsfv-fv-tag",children:[e.label,(0,n.jsx)("button",{type:"button",className:"rsfv-fv-tag-remove",onClick:()=>{return s=e.value,t=e.taxonomy,J((e=>e.filter((e=>!(e.value===s&&e.taxonomy===t))))),void k((e=>e.map((e=>{if(e.taxonomy===t){const t=e.terms.filter((e=>e!==s));return{...e,terms:t}}return e})).filter((e=>e.terms.length>0))));var s,t},children:"Ã—"})]},`${e.taxonomy}-${e.value}`)))}),(0,n.jsxs)("div",{className:"rsfv-fv-page-search",children:[(0,n.jsx)("input",{type:"text",className:"regular-text",value:$,onChange:e=>R(e.target.value),placeholder:(0,r.__)("Search taxonomy terms...","rsfv")}),L&&(0,n.jsx)("span",{className:"spinner is-active"}),A.length>0&&(0,n.jsx)("ul",{className:"rsfv-fv-search-results",children:A.map((e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{type:"button",onClick:()=>{return s=e,H.some((e=>e.value===s.value&&e.taxonomy===s.taxonomy))||(J([...H,s]),k((e=>e.find((e=>e.taxonomy===s.taxonomy))?e.map((e=>e.taxonomy===s.taxonomy?{...e,terms:[...e.terms,s.value]}:e)):[...e,{taxonomy:s.taxonomy,terms:[s.value]}]))),R(""),void I([]);var s},disabled:B(e.value,e.taxonomy),children:[e.label,B(e.value,e.taxonomy)&&" âœ“"]})},`${e.taxonomy}-${e.value}`)))})]}),(0,n.jsx)("p",{className:"description",children:(0,r.__)("The floating video will appear on archive pages and single posts belonging to the selected terms.","rsfv")})]})]}),(0,n.jsxs)("div",{className:"rsfv-fv-form-actions",children:[(0,n.jsx)("button",{type:"submit",className:"button button-primary button-large",disabled:l||!(d.trim()&&("self"!==v||u)&&("embed"!==v||_.trim())),children:l?(0,r.__)("Saving...","rsfv"):o?(0,r.__)("Update Floating Video","rsfv"):(0,r.__)("Create Floating Video","rsfv")}),(0,n.jsx)("button",{type:"button",className:"button button-large",onClick:t,children:(0,r.__)("Cancel","rsfv")})]})]})]})},w=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),[c,v]=(0,a.useState)(!1),[f,u]=(0,a.useState)(null),h=(0,a.useCallback)((async()=>{l(!0);try{const e=await i()({path:"/rsfv/v1/floating-videos"});s(e)}catch(e){console.error("Error fetching floating videos:",e),s([])}finally{l(!1)}}),[]);(0,a.useEffect)((()=>{h()}),[h]);const p=(e,s="success")=>{u({message:e,type:s}),setTimeout((()=>u(null)),4e3)},m=e=>{switch(e.display_type){case"sitewide":return(0,r.__)("Sitewide","rsfv");case"specific_pages":const s=e.page_ids?.length||0;return 1===s?(0,r.__)("1 specific post/page","rsfv"):`${s} ${(0,r.__)("specific posts/pages","rsfv")}`;case"post_types":return(e.target_post_types||[]).join(", ")||(0,r.__)("Post Types","rsfv");case"taxonomies":return(0,r.__)("Taxonomy terms","rsfv");default:return"â€”"}},_=e=>"embed"===e.video_source?(0,r.__)("Embed","rsfv"):(0,r.__)("Self-hosted","rsfv");return null!==o?(0,n.jsxs)("div",{className:"rsfv-floating-videos",children:[f&&(0,n.jsx)("div",{className:`notice notice-${f.type} is-dismissible rsfv-fv-notice`,children:(0,n.jsx)("p",{children:f.message})}),(0,n.jsx)(N,{video:"new"===o?null:o,onSave:async e=>{v(!0);try{"new"===o?(await i()({path:"/rsfv/v1/floating-videos",method:"POST",data:e}),p((0,r.__)("Floating video created successfully.","rsfv"))):(await i()({path:`/rsfv/v1/floating-videos/${o.id}`,method:"PUT",data:e}),p((0,r.__)("Floating video updated successfully.","rsfv"))),d(null),h()}catch(e){console.error("Save error:",e),p((0,r.__)("Error saving floating video.","rsfv"),"error")}finally{v(!1)}},onCancel:()=>d(null),saving:c})]}):(0,n.jsxs)("div",{className:"rsfv-floating-videos",children:[f&&(0,n.jsx)("div",{className:`notice notice-${f.type} is-dismissible rsfv-fv-notice`,children:(0,n.jsx)("p",{children:f.message})}),(0,n.jsxs)("div",{className:"rsfv-fv-header",children:[(0,n.jsx)("h2",{children:(0,r.__)("Floating Videos","rsfv")}),(0,n.jsx)("button",{className:"button button-primary",onClick:()=>d("new"),children:(0,r.__)("+ Add New Floating Video","rsfv")})]}),t?(0,n.jsxs)("div",{className:"rsfv-loading",children:[(0,n.jsx)("span",{className:"spinner is-active"}),(0,n.jsx)("span",{children:(0,r.__)("Loading floating videos...","rsfv")})]}):0===e.length?(0,n.jsxs)("div",{className:"rsfv-fv-empty",children:[(0,n.jsx)("div",{className:"rsfv-fv-empty-icon",children:"ðŸŽ¬"}),(0,n.jsx)("h3",{children:(0,r.__)("No floating videos yet","rsfv")}),(0,n.jsx)("p",{children:(0,r.__)("Add a floating video to display a play button on your site that opens a video popup when clicked.","rsfv")}),(0,n.jsx)("button",{className:"button button-primary",onClick:()=>d("new"),children:(0,r.__)("Create Your First Floating Video","rsfv")})]}):(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped rsfv-fv-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"column-title",children:(0,r.__)("Title","rsfv")}),(0,n.jsx)("th",{className:"column-source",children:(0,r.__)("Video Source","rsfv")}),(0,n.jsx)("th",{className:"column-display",children:(0,r.__)("Display On","rsfv")}),(0,n.jsx)("th",{className:"column-status",children:(0,r.__)("Status","rsfv")}),(0,n.jsx)("th",{className:"column-actions",children:(0,r.__)("Actions","rsfv")})]})}),(0,n.jsx)("tbody",{children:e.map((e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"column-title",children:(0,n.jsx)("strong",{children:(0,n.jsx)("a",{href:"#",onClick:s=>{s.preventDefault(),d(e)},children:e.title||(0,r.__)("(no title)","rsfv")})})}),(0,n.jsx)("td",{className:"column-source",children:_(e)}),(0,n.jsx)("td",{className:"column-display",children:m(e)}),(0,n.jsx)("td",{className:"column-status",children:(0,n.jsx)("span",{className:`rsfv-fv-status rsfv-fv-status--${e.status}`,children:"publish"===e.status?(0,r.__)("Active","rsfv"):(0,r.__)("Draft","rsfv")})}),(0,n.jsxs)("td",{className:"column-actions",children:[(0,n.jsx)("button",{className:"button button-small",onClick:()=>d(e),children:(0,r.__)("Edit","rsfv")})," ",(0,n.jsx)("button",{className:"button button-small",onClick:()=>(async e=>{const s="publish"===e.status?"draft":"publish";try{await i()({path:`/rsfv/v1/floating-videos/${e.id}`,method:"PUT",data:{...e,status:s}}),p("publish"===s?(0,r.__)("Floating video activated.","rsfv"):(0,r.__)("Floating video deactivated.","rsfv")),h()}catch(e){console.error("Toggle error:",e),p((0,r.__)("Error updating status.","rsfv"),"error")}})(e),children:"publish"===e.status?(0,r.__)("Deactivate","rsfv"):(0,r.__)("Activate","rsfv")})," ",(0,n.jsx)("button",{className:"button button-small button-link-delete",onClick:()=>(async e=>{if(window.confirm((0,r.__)("Are you sure you want to delete this floating video?","rsfv")))try{await i()({path:`/rsfv/v1/floating-videos/${e}`,method:"DELETE"}),p((0,r.__)("Floating video deleted.","rsfv")),h()}catch(e){console.error("Delete error:",e),p((0,r.__)("Error deleting floating video.","rsfv"),"error")}})(e.id),children:(0,r.__)("Delete","rsfv")})]})]},e.id)))})]})]})},S=()=>{const e=window.rsfvTools?.isPro||!1,s=window.rsfvTools?.upgradeUrl||"https://developer.developer.developer/plugins/developer-developer-featured-video/";return(0,n.jsxs)("div",{className:"rsfv-sidebar",children:[(0,n.jsxs)("div",{className:"rsfv-sidebar-panel",children:[(0,n.jsx)("h3",{className:"rsfv-sidebar-title",children:(0,r.__)("ðŸ™‹â€â™‚ï¸ Important Note","rsfv")}),(0,n.jsxs)("p",{children:[(0,r.__)("If Featured Videos are not working with your theme, try selecting a supported","rsfv")," ",(0,n.jsx)("a",{href:`${window.rsfvTools?.settingsUrl||"#"}`,children:(0,r.__)("Theme Compatibility Engine","rsfv")})," ",(0,r.__)("in Settings.","rsfv")]}),(0,n.jsx)("p",{children:(0,r.__)("If your theme is not listed and the issue persists, submit a request on our GitHub repository. Please note that PRO subscribers receive priority support over GitHub requests, which supports the continuous development of the plugin.","rsfv")}),(0,n.jsxs)("p",{children:[(0,n.jsx)("a",{className:"button button-primary",href:`${window.rsfvTools?.settingsUrl||"#"}`,children:(0,r.__)("Go to Settings","rsfv")}),"Â Â ",(0,n.jsx)("a",{className:"button button-secondary",href:"https://github.com/JetixWP/really-simple-featured-video/issues",target:"_blank",children:(0,r.__)("File a Request","rsfv")})]})]}),!e&&(0,n.jsxs)("div",{className:"rsfv-sidebar-panel rsfv-upgrade-banner",children:[(0,n.jsx)("h3",{className:"rsfv-upgrade-title",children:(0,r.__)("ðŸš€ Ready to go beyond?","rsfv")}),(0,n.jsx)("p",{className:"rsfv-upgrade-description",children:(0,r.__)("Unlock powerful features like advanced video controls, extended WooCommerce integration, and more!","rsfv")}),(0,n.jsxs)("ul",{className:"rsfv-upgrade-features",children:[(0,n.jsx)("li",{children:(0,r.__)("âœ… Extended Autoplay on Hover","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("âœ… Extended WooCommerce Featured Video","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("âœ… Support for more Premium/Custom Themes","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("âœ… Requests for Theme Compatibility","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("âœ… Priority Support","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("And much more...","rsfv")})]}),(0,n.jsx)("a",{href:s,className:"button button-primary rsfv-upgrade-button",target:"_blank",rel:"noopener noreferrer",children:(0,r.__)("Upgrade Now","rsfv")})]}),(0,n.jsxs)("div",{className:"rsfv-sidebar-panel",children:[(0,n.jsx)("h3",{className:"rsfv-sidebar-title",children:(0,r.__)("Quick Tips","rsfv")}),(0,n.jsxs)("ul",{className:"rsfv-sidebar-tips",children:[(0,n.jsx)("li",{children:(0,r.__)("Click on a thumbnail to set or change the featured image.","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("Use the video type dropdown to switch between self-hosted and embed videos.","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("Set a poster image for self-hosted videos to display before playback.","rsfv")}),(0,n.jsx)("li",{children:(0,r.__)("Search for posts by title using the search field above.","rsfv")})]})]}),(0,n.jsxs)("div",{className:"rsfv-sidebar-panel",children:[(0,n.jsx)("h3",{className:"rsfv-sidebar-title",children:(0,r.__)("Keyboard Shortcuts","rsfv")}),(0,n.jsxs)("ul",{className:"rsfv-sidebar-shortcuts",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{children:"Enter"}),(0,n.jsx)("span",{children:(0,r.__)("Submit search","rsfv")})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{children:"Esc"}),(0,n.jsx)("span",{children:(0,r.__)("Close media modal","rsfv")})]})]})]})]})},k=()=>{const e=[{id:"manage",label:(0,r.__)("Manage Featured Videos","rsfv")},{id:"floating-videos",label:(0,r.__)("Manage Floating Videos","rsfv")}],s=(0,a.useCallback)((()=>{const s=window.location.hash.replace("#","");return e.map((e=>e.id)).includes(s)?s:e[0].id}),[]),[t,l]=(0,a.useState)(s);return(0,a.useEffect)((()=>{const e=()=>{l(s())};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}),[s]),(0,n.jsxs)("div",{className:"rsfv-tools-app",children:[(0,n.jsx)("div",{className:"rsfv-tabs",children:(0,n.jsx)("nav",{className:"rsfv-tabs-nav",children:e.map((e=>(0,n.jsx)("button",{className:"rsfv-tab-button "+(t===e.id?"active":""),onClick:()=>{return s=e.id,l(s),void window.history.replaceState(null,"",`#${s}`);var s},children:e.label},e.id)))})}),(0,n.jsx)("div",{className:"rsfv-tab-content",children:(0,n.jsxs)("div",{className:"rsfv-content-wrapper",children:[(0,n.jsxs)("div",{className:"rsfv-main-content",children:["manage"===t&&(0,n.jsx)(y,{}),"floating-videos"===t&&(0,n.jsx)(w,{})]}),(0,n.jsx)(S,{})]})})]})},C=document.getElementById("rsfv-tools-app");C&&(0,a.createRoot)(C).render((0,n.jsx)(k,{}))}},t={};function a(e){var r=t[e];if(void 0!==r)return r.exports;var l=t[e]={exports:{}};return s[e](l,l.exports,a),l.exports}a.m=s,e=[],a.O=(s,t,r,l)=>{if(!t){var i=1/0;for(c=0;c<e.length;c++){for(var[t,r,l]=e[c],n=!0,o=0;o<t.length;o++)(!1&l||i>=l)&&Object.keys(a.O).every((e=>a.O[e](t[o])))?t.splice(o--,1):(n=!1,l<i&&(i=l));if(n){e.splice(c--,1);var d=r();void 0!==d&&(s=d)}}return s}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[t,r,l]},a.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return a.d(s,{a:s}),s},a.d=(e,s)=>{for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},a.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={57:0,350:0};a.O.j=s=>0===e[s];var s=(s,t)=>{var r,l,[i,n,o]=t,d=0;if(i.some((s=>0!==e[s]))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(o)var c=o(a)}for(s&&s(t);d<i.length;d++)l=i[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},t=globalThis.webpackChunkreally_simple_featured_video=globalThis.webpackChunkreally_simple_featured_video||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var r=a.O(void 0,[350],(()=>a(909)));r=a.O(r)})();